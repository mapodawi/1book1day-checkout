var _samcarttracking=(()=>{var v=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var _=Object.prototype.hasOwnProperty;var C=(a,e)=>{for(var t in e)v(a,t,{get:e[t],enumerable:!0})},q=(a,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of b(e))!_.call(a,n)&&n!==t&&v(a,n,{get:()=>e[n],enumerable:!(r=P(e,n))||r.enumerable});return a};var x=a=>q(v({},"__esModule",{value:!0}),a);var k={};C(k,{tracker:()=>A});var y="debug",m=class{constructor(e){this.id="";this.type=y;e&&this.init(e)}init(e){let{id:t}=e;this.setup(t)}isValid(){return this.id.length>0}setup(e){this.id=e}viewItem(e){console.log(e)}addToCart(e){console.log(e)}removeFromCart(e){console.log(e)}addPaymentInfo(e){console.log(e)}purchase(e){console.log(e)}};var p=class{constructor(e){this.id="";this.type="google";this.hasScript=!1;e&&this.init(e)}init(e){let{ga:t,gtm:r}=e;this.id=`${t}${r}`,this.setup(e)}isValid(){return this.hasScript&&this.id.length>0}setup(e){let{ga:t,gtm:r,gaSessionId:n,gaClientId:o}=e;if(r){let i=document.createElement("script");i.async=!0,i.src=`https://www.googletagmanager.com/gtm.js?id=${r}`,document.head.appendChild(i)}if(t){let i=document.createElement("script");i.async=!0,i.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,document.head.appendChild(i)}if(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},r&&window.dataLayer.push({"gtm.start":new Date().getTime(),event:"gtm.js"}),t){window.gtag("js",new Date);let i={session_id:n,client_id:o};window.gtag("config",t,i)}this.hasScript=!0}viewItem(e){var r;let t={currency:e.currency,value:e.products.reduce((n,o)=>n+o.price,0),items:[]};(r=e.products)==null||r.forEach((n,o)=>{var s;let i={item_id:(s=n.sku)!=null?s:n.id,item_name:n.name,price:n.price,quantity:n.quantity,index:o};t.items.push(i)}),window.gtag("event","view_event",t)}addToCart(e){var r,n,o,i;let t={currency:e.currency,value:e.value,items:{item_id:(r=e.product.sku)!=null?r:e.product.id,item_name:e.product.name,affiliation:"",coupon:(n=e.product.coupon)!=null?n:"",discount:(o=e.product.discount)!=null?o:0,index:0,item_brand:"",item_category:(i=e.product.category)!=null?i:"",price:e.product.price,quantity:e.product.quantity,currency:e.product.currency}};window.gtag("event","add_to_cart",t)}removeFromCart(e){var r,n,o,i;let t={currency:e.currency,value:e.value,items:{item_id:(r=e.product.sku)!=null?r:e.product.id,item_name:e.product.name,affiliation:"",coupon:(n=e.product.coupon)!=null?n:"",discount:(o=e.product.discount)!=null?o:0,index:0,item_brand:"",item_category:(i=e.product.category)!=null?i:"",price:e.product.price,quantity:e.product.quantity,currency:e.product.currency}};window.gtag("event","remove_from_cart",t)}addPaymentInfo(e){var r;let t={currency:e.currency,value:e.value,items:[]};(r=e.products)==null||r.forEach((n,o)=>{var s,c,u,d;let i={item_id:(s=n.sku)!=null?s:n.id,item_name:n.name,affiliation:"",coupon:(c=n.coupon)!=null?c:"",discount:(u=n.discount)!=null?u:0,index:o,item_brand:"",item_category:(d=n.category)!=null?d:"",price:n.price,quantity:n.quantity,currency:n.currency};t.items.push(i)}),window.gtag("event","add_payment_info",t)}purchase(e){var r,n,o,i;let t={transaction_id:e.eventId,value:e.value,tax:(r=e.tax)!=null?r:0,shipping:(n=e.shipping)!=null?n:0,currency:e.currency,coupon:(o=e.coupon)!=null?o:"",items:[]};(i=e.products)==null||i.forEach((s,c)=>{var d,l,I,h;let u={item_id:(d=s.sku)!=null?d:s.id,item_name:s.name,affiliation:"",coupon:(l=s.coupon)!=null?l:"",discount:(I=s.discount)!=null?I:0,index:c,item_brand:"",item_category:(h=s.category)!=null?h:"",price:s.price,quantity:s.quantity,currency:s.currency};t.items.push(u)}),window.gtag("event","purchase",t)}};var g=class{constructor(e){this.id="";this.type="meta";this.hasScript=!1;this.fbWindow=window;e&&this.init(e)}init(e){let{id:t}=e;this.id=t,this.setup(t)}isValid(){return this.hasScript&&this.id.length>0}setup(e){let t=document.createElement("script");t.type="text/javascript",t.innerHTML=`
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
    `,document.head.appendChild(t),this.fbWindow.fbq("init",`${e}`),this.fbWindow.fbq("track","PageView"),this.hasScript=!0}viewItem(e){let{products:t,currency:r}=e,n=t.map(i=>{var s;return{id:(s=i.sku)!=null?s:i.id,name:i.name,quantity:i.quantity,price:i.price}}),o={content_ids:t.map(i=>{var s;return(s=i.sku)!=null?s:i.id}),content_name:t[0].name,content_type:"product",contents:n,currency:r,value:e.value};this.fbWindow.fbq("track","ViewContent",o,{eventID:e.eventId})}addToCart(e){var i;let{product:t,currency:r}=e,n=[{id:(i=t.sku)!=null?i:t.id,name:t.name,quantity:t.quantity,price:t.price}],o={content_ids:[t.id],content_name:t.name,content_type:"product",contents:n,currency:r,value:t.price};this.fbWindow.fbq("track","AddPaymentInfo",o,{eventID:e.eventId})}removeFromCart(e){var i;let{product:t,currency:r}=e,n=[{id:(i=t.sku)!=null?i:t.id,name:t.name,quantity:t.quantity,price:t.price}],o={content_ids:[t.id],content_name:t.name,content_type:"product",contents:n,currency:r,value:t.price};this.fbWindow.fbq("track","AddPaymentInfo",o,{eventID:e.eventId})}addPaymentInfo(e){var i,s;let{products:t,currency:r}=e,n=t.map(c=>{var u;return{id:(u=c.sku)!=null?u:c.id,name:c.name,quantity:c.quantity,price:c.price}}),o={content_category:(i=t[0].category)!=null?i:"",content_ids:t.map(c=>{var u;return(u=c.sku)!=null?u:c.id}),contents:n,currency:r,value:e.value,user_data:{em:(s=e.customer)==null?void 0:s.email}};this.fbWindow.fbq("track","AddPaymentInfo",o,{eventID:e.eventId})}purchase(e){var i;let{products:t,currency:r}=e,n=t.map(s=>{var c;return{id:(c=s.sku)!=null?c:s.id,name:s.name,quantity:s.quantity,price:s.price}}),o={user_data:{em:(i=e.customer)==null?void 0:i.email},order_id:e.orderId,content_ids:t.map(s=>{var c;return(c=s.sku)!=null?c:s.id}),content_name:t[0].name,content_type:"product",contents:n,currency:r,value:e.value};this.fbWindow.fbq("track","Purchase",o,{eventID:e.eventId})}};var w={DebugProvider:m,GoogleProvider:p,MetaProvider:g};var E={ADD_TO_CART:"addToCart",ADD_PAYMENT_INFO:"addPaymentInfo",PURCHASE:"purchase",VIEW_ITEM:"viewItem"};var f=class{constructor(){this.connections=[];this.debugLogging=!1}init(e,t){this.connections.some(n=>n.type===e)||Object.values(w).map(o=>new o).forEach(o=>{o.type===e&&(o.init(t),this.connections.push({type:o.type,provider:o}),o.type===y&&(this.debugLogging=!0))})}fire(e,t){this.connections.forEach(({provider:r})=>{r.isValid()&&typeof r[e]=="function"?(this.debugLogging&&console.log(`firing ${e} for ${r.type}`),r[e](t)):this.debugLogging&&console.log(r.type,r.isValid(),typeof r[E[e]])})}},A=new f;return x(k);})();
//# sourceMappingURL=index.js.map
